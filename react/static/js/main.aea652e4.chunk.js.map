{"version":3,"sources":["components/TodoList.js","components/TodoFilter.js","App.js","index.js"],"names":["TodoList","props","state","mode","deleteItem","bind","completeItem","id","this","changeValMode","deleteOneById","completeOneById","data","type","filter","item","isCompleted","console","log","result","showResulData","className","map","key","class","onClick","checked","onDoubleClick","changeInputMode","name","style","display","value","onChange","e","editItemById","target","onBlur","fnishEdit","React","Component","TodoFilter","onSetFilterType","setState","todoCount","forEach","v","clearComplete","App","useState","setData","text","setInputChange","setFilterType","useEffect","a","axios","onSubmit","event","preventDefault","newItem","length","concat","handleSubmit","placeholder","autoFocus","isAllCompleted","every","index","val","htmlFor","deleteIndex","findIndex","splice","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.aea652e4.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nclass TodoList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      mode: 'onShow'\r\n    };\r\n    this.deleteItem = this.deleteItem.bind(this);\r\n    this.completeItem = this.completeItem.bind(this);\r\n  }\r\n  changeInputMode(id, mode) {\r\n    this.props.changeValMode(id, mode);\r\n  }\r\n  deleteItem(id) {\r\n    this.props.deleteOneById(id);\r\n  }\r\n  completeItem(id) {\r\n    this.props.completeOneById(id);\r\n  }\r\n\r\n  showResulData(data, type) {\r\n    if (type === 'active') {\r\n      return data.filter(item => {\r\n        return item.isCompleted === false;\r\n      });\r\n    }\r\n    if (type === 'completed') {\r\n      return data.filter(item => {\r\n        return item.isCompleted === true;\r\n      });\r\n    }\r\n    return data;\r\n  }\r\n  render() {\r\n    console.log('render');\r\n    const { data, type } = this.props;\r\n    const { mode } = this.state;\r\n    const result = this.showResulData(data, type);\r\n\r\n    return (\r\n      <ul className=\"todo-list\">\r\n        {result.map(item => (\r\n          <li\r\n            className={item.isCompleted === true ? 'completed' : ''}\r\n            key={item.id}\r\n          >\r\n            {item.mode == 'onShow' ? (\r\n              <div class=\"view\">\r\n                <input\r\n                  onClick={this.completeItem.bind(this, item.id)}\r\n                  className=\"toggle\"\r\n                  type=\"checkbox\"\r\n                  checked={item.isCompleted ? 'checked' : ''}\r\n                />\r\n                <label\r\n                  onDoubleClick={() => this.changeInputMode(item.id, item.mode)}\r\n                >\r\n                  {item.name}\r\n                </label>\r\n                <button\r\n                  className=\"destroy\"\r\n                  onClick={this.deleteItem.bind(this, item.id)}\r\n                ></button>\r\n              </div>\r\n            ) : (\r\n              'Loading...'\r\n            )}\r\n\r\n            {item.mode == 'onEdit' ? (\r\n              <input\r\n                className=\"edit\"\r\n                style={{ display: 'block' }}\r\n                value={item.name}\r\n                onChange={e => this.props.editItemById(item.id, e.target.value)}\r\n                onBlur={() => this.props.fnishEdit(item.id)}\r\n              />\r\n            ) : (\r\n              ''\r\n            )}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TodoList;\r\n","import React from 'react';\r\n\r\nclass TodoFilter extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      type: 'all'\r\n    };\r\n  }\r\n  onSetFilterType = type => {\r\n    this.setState(\r\n      {\r\n        type: type\r\n      },\r\n      () => {\r\n        this.props.TodoFilter(type);\r\n      }\r\n    );\r\n  };\r\n  render() {\r\n    const { type } = this.state;\r\n    // 6. 计算未完成任务的数量\r\n    const { data } = this.props;\r\n    let todoCount = 0;\r\n    data.forEach(v => {\r\n      return v.isCompleted === false ? (todoCount += 1) : '';\r\n    });\r\n\r\n    return (\r\n      <footer className=\"footer\">\r\n        <span className=\"todo-count\">\r\n          <strong>{todoCount}</strong> item left\r\n        </span>\r\n        <ul className=\"filters\">\r\n          <li>\r\n            <a\r\n              className={type === 'all' ? 'selected' : ''}\r\n              onClick={() => this.onSetFilterType('all')}\r\n            >\r\n              All\r\n            </a>\r\n          </li>\r\n          <li>\r\n            <a\r\n              className={type === 'active' ? 'selected' : ''}\r\n              onClick={() => this.onSetFilterType('active')}\r\n            >\r\n              Active\r\n            </a>\r\n          </li>\r\n          <li>\r\n            <a\r\n              className={type === 'completed' ? 'selected' : ''}\r\n              onClick={() => this.onSetFilterType('completed')}\r\n            >\r\n              Completed\r\n            </a>\r\n          </li>\r\n        </ul>\r\n        <button\r\n          className=\"clear-completed\"\r\n          onClick={() => this.props.clearComplete()}\r\n        >\r\n          Clear completed\r\n        </button>\r\n      </footer>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TodoFilter;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './static/base.css';\r\nimport './static/index.css';\r\nimport TodoList from './components/TodoList';\r\nimport TodoFilter from './components/TodoFilter';\r\nimport axios from 'axios';\r\n\r\nfunction App() {\r\n  const [data, setData] = useState([]);\r\n  const [text, setInputChange] = useState('');\r\n  const [type, setFilterType] = useState('all');\r\n  // 1. 获取数据并显示到页面中\r\n  useEffect(async () => {\r\n    const result = await axios(\r\n      'https://xiaoyueyue.org/todomvc-demos/static/data.json'\r\n    );\r\n    result.data.forEach(v => {\r\n      v.mode = 'onShow';\r\n    });\r\n    setData(result.data);\r\n  }, []);\r\n\r\n  // 2.  添加任务\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n    if (!text) {\r\n      return;\r\n    }\r\n    const newItem = {\r\n      id: data[data.length - 1].id + 1,\r\n      name: text,\r\n      isCompleted: false,\r\n      mode: 'onShow'\r\n    };\r\n\r\n    setData(data.concat(newItem));\r\n    setInputChange('');\r\n  }\r\n\r\n  // 3. 删除任务（单个）\r\n  function deleteOne(id) {\r\n    let deleteIndex = data.findIndex(v => v.id === id);\r\n    data.splice(deleteIndex, 1);\r\n    // setData(data) 异步方法必须传递函数\r\n    setData(\r\n      data.filter(function(val) {\r\n        return val.id != id;\r\n      })\r\n    );\r\n  }\r\n  // 4. 更改任务状态\r\n  function completeOne(id) {\r\n    data.forEach(function(item, index) {\r\n      return item.id === id ? (item.isCompleted = !item.isCompleted) : '';\r\n    });\r\n    setData(\r\n      data.filter(function(val) {\r\n        return val;\r\n      })\r\n    );\r\n  }\r\n  // 5. 增加筛选\r\n  function onFilterTodoList(type) {\r\n    setFilterType(type);\r\n  }\r\n  // 7. 清空已完成任务\r\n  function completedClearn() {\r\n    setData(\r\n      data.filter(function(item) {\r\n        return item.isCompleted === false;\r\n      })\r\n    );\r\n  }\r\n  // 8. 批量更改任务状态\r\n  function doAllCompleted() {\r\n    let isAllCompleted = data.every(item => item.isCompleted === true);\r\n    data.forEach(function(item, index) {\r\n      return isAllCompleted\r\n        ? (item.isCompleted = false)\r\n        : (item.isCompleted = true);\r\n    });\r\n    setData(\r\n      data.filter(function(val) {\r\n        return val;\r\n      })\r\n    );\r\n  }\r\n  // 9. - 编辑状态切换\r\n  function changeValMode(id, mode) {\r\n    console.log(id, mode);\r\n    data.forEach(function(item, index) {\r\n      return item.id === id ? (item.mode = 'onEdit') : '';\r\n    });\r\n    setData(\r\n      data.filter(function(val) {\r\n        return val;\r\n      })\r\n    );\r\n    console.log(data);\r\n  }\r\n  // - 编辑模式\r\n  function editItemById(id, val) {\r\n    console.log('edit', val);\r\n\r\n    data.forEach(function(item, index) {\r\n      return item.id === id ? (item.name = val) : '';\r\n    });\r\n    setData(\r\n      data.filter(function(val) {\r\n        return val;\r\n      })\r\n    );\r\n    console.log(data);\r\n  }\r\n  // - 编辑结束\r\n  function fnishEdit(id) {\r\n    console.log('编辑结束设置', id);\r\n\r\n    data.forEach(function(item, index) {\r\n      return item.id === id ? (item.mode = 'onShow') : '';\r\n    });\r\n    setData(\r\n      data.filter(function(val) {\r\n        return val;\r\n      })\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"todoapp\">\r\n      <header className=\"header\">\r\n        <h1>todos</h1>\r\n        <form onSubmit={e => handleSubmit(e)}>\r\n          <input\r\n            className=\"new-todo\"\r\n            placeholder=\"What needs to be done?\"\r\n            autoFocus\r\n            value={text}\r\n            onChange={e => setInputChange(e.target.value)}\r\n          />\r\n        </form>\r\n        <section className=\"main\">\r\n          <input\r\n            id=\"toggle-all\"\r\n            className=\"toggle-all\"\r\n            type=\"checkbox\"\r\n            onClick={doAllCompleted}\r\n          />\r\n          <label htmlFor=\"toggle-all\">Mark all as complete</label>\r\n          <TodoList\r\n            type={type}\r\n            data={data}\r\n            deleteOneById={deleteOne}\r\n            completeOneById={completeOne}\r\n            changeValMode={changeValMode}\r\n            editItemById={editItemById}\r\n            fnishEdit={fnishEdit}\r\n          />\r\n        </section>\r\n      </header>\r\n\r\n      <TodoFilter\r\n        data={data}\r\n        TodoFilter={onFilterTodoList}\r\n        clearComplete={completedClearn}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport './App.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}